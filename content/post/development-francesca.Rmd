---
title: "Development (ft. Francesca)"
author: ""
date: "2020-06-27"
output:
  blogdown::html_page:
    toc: true
editor_options: 
  chunk_output_type: inline
---
```{r set up, warning=FALSE, include=FALSE, message= FALSE}
# Do not edit this code block/chunk
knitr::opts_chunk$set(cache = FALSE,echo = FALSE, message=FALSE, warning = FALSE)

##fig.width = 16/2, fig.height = 9/2

library(tidyverse)
library(data.table)
library(knitr)
library(kableExtra)
library(scales)
library(gridExtra)
`%!in%` = Negate(`%in%`)
```



```{r file config}


dyn <- read.csv("D:/cpr/up-dynasties/dyn_other_data/dyn_ae_ge.csv")


dyn <- dyn %>%  filter(year %!in% c(1974))

#summary(nrega)

dyn$dyn_cum_text <- ifelse(dyn$dyn_cum ==0, "Non-family","Family")

dyn$fam_rel_id_uniq <-  paste(dyn$family_id, dyn$rel_id_uniq,sep = "")


dyn$fam_exp_cum_cat <- factor(dyn$fam_exp_cum_cat, levels=c("[0,1)","[1,6)","[6,11)","[11,21)","[21,Inf]"))

###four way elections


dyn_test <- dyn %>% mutate(contest_type_1 =case_when(position ==1 &dyn_cum ==0 ~1,
                                                                                                                        position ==2 &dyn_cum ==0 ~2,
                                                                                                                        position ==1 &dyn_cum ==1 ~3,
                                                                                                                        position ==2 &dyn_cum ==1 ~5)) %>% group_by( election_type,year,constituency_no) %>% mutate(sum_cont_type = sum(contest_type_1)) %>% mutate(contest_type =ifelse(sum_cont_type ==3, "non-fam v/s non-fam",ifelse(sum_cont_type ==5, "fam v/s non-fam", ifelse(sum_cont_type ==6, "non-fam v/s fam", ifelse(sum_cont_type ==8, "fam v/s fam", "NA")))))


# dyn_test %>% group_by( year,constituency_no) %>% summarise(sum = sum(contest_type)) %>%group_by(sum) %>%  summarise(n())

#table(dyn_test$contest_type)

dyn$contest_type <- dyn_test$contest_type



dyn_ae <- dyn %>% filter(election_type =="AE")


dyn_ge <- dyn %>% filter(election_type =="GE")


```
